(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6084],{34296:function(fe,P,s){"use strict";s.r(P),s.d(P,{default:function(){return de}});var ge=s(57338),G=s(25084),pe=s(57663),R=s(71577),he=s(47673),W=s(4107),K=s(93224),y=s(2824),w=s(11849),ve=s(34792),f=s(48086),v=s(3182),O=s(94043),i=s.n(O),Y=s(49101),F=s(67294),t=s(21010),z=s(75362),J=s(85224),Q=s(16894),X=s(37476),x=s(5966),k=s(12826),je=s(71194),q=s(5644),T=s(65554),_=s(90672),H=s(64317),ee=s(86615),ae=s(22452),e=s(85893),se=function(n){var r=(0,t.YB)();return(0,e.jsxs)(T.Z,{stepsProps:{size:"small"},stepsFormRender:function(p,a){return(0,e.jsx)(q.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.searchTable.updateForm.ruleConfig",defaultMessage:"\u89C4\u5219\u914D\u7F6E"}),visible:n.updateModalVisible,footer:a,onCancel:function(){n.onCancel()},children:p})},onFinish:n.onSubmit,children:[(0,e.jsxs)(T.Z.StepForm,{initialValues:{name:n.values.name,desc:n.values.desc},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,e.jsx)(x.Z,{name:"name",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u89C4\u5219\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(_.Z,{name:"desc",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]}),(0,e.jsxs)(T.Z.StepForm,{initialValues:{target:"0",template:"0"},title:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.title",defaultMessage:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027"}),children:[(0,e.jsx)(H.Z,{name:"target",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(H.Z,{name:"template",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.templateLabel",defaultMessage:"\u89C4\u5219\u6A21\u677F"}),valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(ee.Z.Group,{name:"type",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.typeLabel",defaultMessage:"\u89C4\u5219\u7C7B\u578B"}),options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(T.Z.StepForm,{initialValues:{type:"1",frequency:"month"},title:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.title",defaultMessage:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F"}),children:[(0,e.jsx)(ae.Z,{name:"time",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.timeLabel",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.schedulingPeriod.timeRules",defaultMessage:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"})}]}),(0,e.jsx)(H.Z,{name:"frequency",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},re=se,C=s(36571),te=function(){var j=(0,v.Z)(i().mark(function n(r){var o;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=f.default.loading("Saving"),a.prev=1,a.next=4,(0,C.HP)((0,w.Z)({},r));case 4:return o(),f.default.success("Added successfully"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),o(),f.default.error("Adding failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},n,null,[[1,9]])}));return function(r){return j.apply(this,arguments)}}(),ue=function(){var j=(0,v.Z)(i().mark(function n(r){var o;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=f.default.loading("Configuring"),a.prev=1,a.next=4,(0,C.D7)({name:r.name,desc:r.desc,key:r.key});case 4:return o(),f.default.success("Configuration is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),o(),f.default.error("Configuration failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},n,null,[[1,9]])}));return function(r){return j.apply(this,arguments)}}(),le=function(){var j=(0,v.Z)(i().mark(function n(r){var o;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=f.default.loading("\u6B63\u5728\u5220\u9664"),r){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,C.DV)({key:r.map(function(Z){return Z.key})});case 6:return o(),f.default.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),o(),f.default.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},n,null,[[3,11]])}));return function(r){return j.apply(this,arguments)}}(),ne=function(){var n=(0,F.useState)(!1),r=(0,y.Z)(n,2),o=r[0],p=r[1],a=(0,F.useState)(!1),Z=(0,y.Z)(a,2),ie=Z[0],B=Z[1],oe=(0,F.useState)(!1),A=(0,y.Z)(oe,2),E=A[0],V=A[1],M=(0,F.useRef)(),ce=(0,F.useState)(),N=(0,y.Z)(ce,2),m=N[0],S=N[1],me=(0,F.useState)([]),$=(0,y.Z)(me,2),b=$[0],I=$[1],D=(0,t.YB)(),L=[{title:(0,e.jsx)(t._H,{id:"pages.security.users.colums.id",defaultMessage:"Login Name"}),dataIndex:"name",tip:"The rule name is the unique key",render:function(u,l){return(0,e.jsx)("a",{onClick:function(){S(l),V(!0)},children:u})}},{title:(0,e.jsx)(t._H,{id:"pages.security.users.colums.name",defaultMessage:"Name"}),dataIndex:"desc",valueType:"textarea"},{title:(0,e.jsx)(t._H,{id:"pages.security.users.colums.status",defaultMessage:"Status"}),dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:(0,e.jsx)(t._H,{id:"pages.security.users.nameStatus.enable",defaultMessage:"Enable"}),status:"Success"},1:{text:(0,e.jsx)(t._H,{id:"pages.security.users.nameStatus.disable",defaultMessage:"Disabled"}),status:"Error"}}},{title:(0,e.jsx)(t._H,{id:"pages.security.users.colums.lastlogin",defaultMessage:"Last login time"}),sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(u,l,g){var h=l.defaultRender,c=(0,K.Z)(l,["defaultRender"]),U=g.getFieldValue("status");return"".concat(U)==="0"?!1:"".concat(U)==="3"?(0,e.jsx)(W.Z,(0,w.Z)((0,w.Z)({},c),{},{placeholder:D.formatMessage({id:"pages.searchTable.exception",defaultMessage:"Please enter the reason for the exception!"})})):h(u)}}];return(0,e.jsxs)(z.ZP,{breadcrumbRender:!1,children:[(0,e.jsx)(Q.ZP,{headerTitle:D.formatMessage({id:"pages.security.users.title",defaultMessage:"Enquiry form"}),actionRef:M,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(R.Z,{type:"primary",onClick:function(){p(!0)},children:[(0,e.jsx)(Y.Z,{})," ",(0,e.jsx)(t._H,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:C.jR,columns:L,rowSelection:{onChange:function(u,l){I(l)}}}),(b==null?void 0:b.length)>0&&(0,e.jsxs)(J.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(t._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:b.length})," ",(0,e.jsx)(t._H,{id:"pages.searchTable.item",defaultMessage:"Record"}),"\xA0\xA0",(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",b.reduce(function(d,u){return d+u.callNo},0)," ",(0,e.jsx)(t._H,{id:"pages.searchTable.tenThousand",defaultMessage:"TK"})]})]}),children:[(0,e.jsx)(R.Z,{onClick:(0,v.Z)(i().mark(function d(){var u,l;return i().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,le(b);case 2:I([]),(u=M.current)===null||u===void 0||(l=u.reloadAndRest)===null||l===void 0||l.call(u);case 4:case"end":return h.stop()}},d)})),children:(0,e.jsx)(t._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,e.jsx)(R.Z,{type:"primary",children:(0,e.jsx)(t._H,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,e.jsxs)(X.Z,{title:D.formatMessage({id:"pages.security.users.createForm.newRule",defaultMessage:"Create new user"}),width:"400px",visible:o,onVisibleChange:p,onFinish:function(){var d=(0,v.Z)(i().mark(function u(l){var g;return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,te(l);case 2:g=c.sent,g&&(p(!1),M.current&&M.current.reload());case 4:case"end":return c.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),children:[(0,e.jsx)(x.Z,{width:"md",label:"\u30ED\u30B0\u30A4\u30F3\u540D",name:"id",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}]}),(0,e.jsx)(x.Z,{width:"md",label:"\u540D\u524D",name:"name",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}]}),(0,e.jsx)(x.Z.Password,{width:"md",name:"password",label:"\u30D1\u30B9\u30EF\u30FC\u30C9",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}]}),(0,e.jsx)(x.Z.Password,{width:"md",name:"re-password",label:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u78BA\u8A8D\u5165\u529B",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}]})]}),(0,e.jsx)(re,{onSubmit:function(){var d=(0,v.Z)(i().mark(function u(l){var g;return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ue(l);case 2:g=c.sent,g&&(B(!1),S(void 0),M.current&&M.current.reload());case 4:case"end":return c.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),onCancel:function(){B(!1),E||S(void 0)},updateModalVisible:ie,values:m||{}}),(0,e.jsx)(G.Z,{width:600,visible:E,onClose:function(){S(void 0),V(!1)},closable:!1,children:(m==null?void 0:m.name)&&(0,e.jsx)(k.Z,{column:2,title:m==null?void 0:m.name,request:(0,v.Z)(i().mark(function d(){return i().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{data:m||{}});case 1:case"end":return l.stop()}},d)})),params:{id:m==null?void 0:m.name},columns:L})})]})},de=ne}}]);
